(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{7617:function(e,t,r){Promise.resolve().then(r.bind(r,46142))},46142:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(20881),s=r(64149),a=r(94920),i=r(17533),o=r(35935),c=r(90270);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.fC,{ref:t,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(i.z$,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(o.nQG,{className:"h-4 w-4"})})})});d.displayName=i.fC.displayName;var l=r(78580),u=r(46646),f=r(5501),p=r(98228);let h={lte:"lte_band",nsa:"nsa_nr5g_band",sa:"nr5g_band"};var m=()=>{let{toast:e}=(0,u.pm)(),[t,r]=(0,s.useState)({lte:[],nsa:[],sa:[]}),[i,o]=(0,s.useState)({lte:[],nsa:[],sa:[]}),[c,m]=(0,s.useState)(!0),b=async e=>{try{let t=encodeURIComponent(e),r=await fetch("/cgi-bin/atinout_handler.sh",{method:"POST",headers:{"Content-Type":"application/json"},body:"command=".concat(t),signal:AbortSignal.timeout(5e3)});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let n=await r.json();if(n.error)throw Error(n.error);return n}catch(e){throw console.error("AT Command error:",e),e}},g=(e,t)=>{for(let r of e.output.split("\n"))if(r.includes(t)){let e=r.match(/"([^"]+)",(.+)/);if(e&&e[2])return e[2].split(":").map(Number)}return[]},v=async()=>{try{let t=(await b('AT+QNWPREFCFG="policy_band"')).output.split("\n"),n={lte:[],nsa:[],sa:[]};t.forEach(e=>{var t,r,s;e.includes('"lte_band"')?n.lte=(null===(t=e.split(",")[1])||void 0===t?void 0:t.split(":").map(Number))||[]:e.includes('"nsa_nr5g_band"')?n.nsa=(null===(r=e.split(",")[1])||void 0===r?void 0:r.split(":").map(Number))||[]:e.includes('"nrdc_nr5g_band"')&&(n.sa=(null===(s=e.split(",")[1])||void 0===s?void 0:s.split(":").map(Number))||[])}),r(n),e({title:"Success",description:"Fetched available bands successfully."})}catch(t){console.error("Error fetching bands:",t),e({title:"Error",description:"Failed to fetch available bands.",variant:"destructive"})}},x=async()=>{try{let e=await b('AT+QNWPREFCFG="lte_band";+QNWPREFCFG="nsa_nr5g_band";+QNWPREFCFG="nr5g_band"'),t={lte:g(e,"lte_band"),nsa:g(e,'+QNWPREFCFG: "nsa_nr5g_band"'),sa:g(e,'+QNWPREFCFG: "nr5g_band"')};console.log("New Checked Bands: ",t),o(t),m(!1)}catch(t){console.error("Error fetching checked bands:",t),e({title:"Error",description:"Failed to fetch checked bands.",variant:"destructive"}),m(!1)}};(0,s.useEffect)(()=>{(async()=>{await v(),await x()})()},[]);let y=(e,t)=>{o(r=>({...r,[e]:r[e].includes(t)?r[e].filter(e=>e!==t):[...r[e],t].sort((e,t)=>e-t)}))},N=async t=>{try{let r=i[t].join(":");await b('AT+QNWPREFCFG="'.concat(h[t],'",').concat(r)),e({title:"Band Locking",description:"Bands locked successfully."}),await x()}catch(r){console.error("Error locking ".concat(t," bands:"),r),e({title:"Error",description:"Failed to lock ".concat(t.toUpperCase()," bands."),variant:"destructive"})}},w=e=>{o(t=>({...t,[e]:[]}))},_=async r=>{try{let n=t[r].join(":");await b('AT+QNWPREFCFG="'.concat(h[r],'",').concat(n)),e({title:"Reset Successful",description:"".concat(r.toUpperCase()," bands reset to default.")}),await x()}catch(t){console.error("Error resetting ".concat(r," bands:"),t),e({title:"Error",description:"Failed to reset ".concat(r.toUpperCase()," bands."),variant:"destructive"})}},E=e=>{let{title:r,description:s,bandType:o,prefix:u}=e;return(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:r}),(0,n.jsx)(a.SZ,{children:s})]}),(0,n.jsx)(a.aY,{className:"grid lg:grid-cols-8 md:grid-cols-6 sm:grid-cols-4 grid-cols-3 grid-flow-row gap-4",children:c?(0,n.jsx)("div",{className:"col-span-8",children:"Fetching bands..."}):t[o].map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(d,{id:"".concat(o,"-").concat(e),checked:i[o].includes(e),onCheckedChange:()=>y(o,e)}),(0,n.jsxs)("label",{htmlFor:"".concat(o,"-").concat(e),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[u,e]})]},e))}),(0,n.jsxs)(a.eW,{className:"border-t py-4 grid grid-flow-row md:grid-cols-3 grid-cols-1 gap-3",children:[(0,n.jsxs)(l.z,{onClick:()=>N(o),children:[(0,n.jsx)(f.Z,{className:"h-4 w-4"}),"Lock Selected Bands"]}),(0,n.jsx)(l.z,{variant:"secondary",onClick:()=>w(o),children:"Uncheck All"}),(0,n.jsxs)(l.z,{variant:"secondary",onClick:()=>_(o),children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),"Reset to Default"]})]})]})};return(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(E,{title:"4G LTE Band Locking",description:"Lock the device to specific LTE bands.",bandType:"lte",prefix:"B"}),(0,n.jsx)(E,{title:"NR5G-NSA Band Locking",description:"Lock the device to specific NR5G-NSA bands.",bandType:"nsa",prefix:"N"}),(0,n.jsx)(E,{title:"NR5G-SA Band Locking",description:"Lock the device to specific NR5G-SA bands.",bandType:"sa",prefix:"N"})]})}},78580:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return d}});var n=r(20881),s=r(64149),a=r(54098),i=r(20116),o=r(90270);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...l})});d.displayName="Button"},94920:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},eW:function(){return u},ll:function(){return c}});var n=r(20881),s=r(64149),a=r(90270);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});l.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},46646:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(64149);let s=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},90270:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(33958),s=r(61779);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[792,59,400,985,330,744],function(){return e(e.s=7617)}),_N_E=e.O()}]);